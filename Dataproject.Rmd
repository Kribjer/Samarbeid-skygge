---
title: "Data Science Project"
author: "Kristian Bjerke"
date: "24/09/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
rm(list = ls())

library(dplyr)
library(ggplot2)
library(tidyverse)
library(gapminder)
library(gganimate)
library(hrbrthemes) # ikke sikker på om denne trenger å være med 
library(png)
library(gifski)
library(magick)

hdi <- read.csv("human-development-index.csv")
```

```{r}
# Vi har 4 kolonner; Country, Value, Code og Year. hdi er hovedarkivet vårt.

hdi <- rename(hdi, "Country" = "Entity")
hdi <- rename(hdi, "Value" = "X..0.1..higher.values.are.better..")

norgeHdi <- hdi %>%
  filter(Country == "Norway")
hdi <- hdi %>%
  filter(Country == c("India", "Norway", "Algeria", "Argentina", "Germany"))


```

```{r}
#Laster opp og rydder renewable energy filen

energy <- read.csv("modern-renewable-energy-consumption.csv")
energy <- rename(energy, "Country" = "Entity")
energy <- rename(energy, "Hydro" = "Hydropower..terawatt.hours.")
energy <- rename(energy, "Wind" = "Wind..terawatt.hours.")
energy <- rename(energy, "Solar" = "Solar..terawatt.hours.")
energy <- rename(energy, "Other renewables" = "Other.renewables..modern.biofuels..geothermal..wave...tidal...terawatt.hours.")

energy <- energy %>%
  filter(Year >= 1980, Year <= 2016)
energy <- energy[ ,-2]

energy <- energy %>%
  filter(Country == c("India", "Norway", "Algeria", "Argentina", "Germany"))

hdi <- hdi %>%
  filter(Year >= 1980, Year <= 2016)

hdi <- hdi[ ,-2]
```

```{r}
#Laster opp gdp percap filen og rydder den

GdpPercap <- read.csv("real-gdp-per-capita-PWT.csv")

GdpPercap <- GdpPercap %>%
  filter(Entity == c("India", "Norway", "Algeria", "Argentina", "Germany"))

GdpPercap <- GdpPercap[ , -2]

GdpPercap <- rename(GdpPercap, "Country" = "Entity", "Year" = "Year", "GdpPercap" = "GDP.per.capita..2011.international....PPP.adjusted.US...")

ggplot(GdpPercap, aes(y = GdpPercap, x = Year, color = Country)) +
  geom_line()



# ANIMERT GRAF AV GDP-PER-CAPITA 

gifski_renderer(file = tempfile(fileext = ".gif"), loop = TRUE,
  width = NULL, height = NULL)

file_renderer(dir = ".", prefix = "gganim_plot", overwrite = FALSE)

magick_renderer(loop = TRUE)

sprite_renderer()

ggplot(GdpPercap, aes(x=Year , y=GdpPercap, color=Country)) + 
  geom_line() + 
  geom_point() + 
  ggtitle("Gdp per capita by country from 1950 to 2018") + 
  ylab("Gdp per capita") +
  transition_reveal(Year)



```


```{r}
#Eksempel med Norge
norgeEnergi <- energy %>%
  filter(Country == "Norway")


```

```{r}
#Eksempel plot med norgeEnergi

norplotHydro <- ggplot(norgeEnergi, aes(x = Year, y = Hydro, color = Country)) +
  geom_point() + 
  geom_line() +
  labs(title = "Hydropower consumption by year, Norway")+
  theme_minimal()
norplotHydro

```


```{r}
# Eksempel plot med norgeHdi

norplotHDI <- ggplot(norgeHdi, aes(x = Year, y = Value, color = Country)) +
  labs(y = "HDI", x = "Year", title = "HDI by year, Norway") +
  geom_point() + 
  geom_line() +
  theme_minimal()

norplotHDI
```

```{r}
# Merger datasettene til et stort et. Kan være lurt å dele det inn i mindre kolonner og må få fikset dato.

totaldata <- merge(energy, hdi, by = "Country")

totalPlot <- ggplot(totaldata, aes(x=Year.y, y=Value, color = Country))+
  geom_point()+
  geom_line()
  

```

```{r}
#Lager et datasett med landene vi skal ha med Norge, tyskland, argentina, india


```


```{r}
#JOBB 1: fikse på kolonnene i totaldata og få sortert det.


```

```{r}
#Jobb 2: finne korrelasjoner i ulike land / alle land mellom HDI og alt. energi.

```

```{r}
#Jobb 3: Om vi finner noe interessant: Poengter det med grafer. F.eks: Hvis Norge har høy korrelasjon, hvis det med en graf. Forklar!


```

