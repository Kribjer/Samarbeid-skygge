---
title: "Data Science Project"
author: "Kristian Bjerke"
date: "24/09/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
rm(list = ls())

library(dplyr)
library(ggplot2)
library(tidyverse)
library(gapminder)
library(gganimate)
library(hrbrthemes) # ikke sikker på om denne trenger å være med 
library(png)
library(gifski)
library(magick)

hdi <- read.csv("human-development-index.csv")
```

```{r}
# Vi har 4 kolonner; Country, Value, Code og Year. hdi er hovedarkivet vårt.

hdi <- rename(hdi, "Country" = "Entity")
hdi <- rename(hdi, "Value" = "X..0.1..higher.values.are.better..")
```

```{r}
#Laster opp og rydder renewable energy filen

energy <- read.csv("modern-renewable-energy-consumption.csv")
energy <- rename(energy, "Country" = "Entity")
energy <- rename(energy, "Hydro" = "Hydropower..terawatt.hours.")
energy <- rename(energy, "Wind" = "Wind..terawatt.hours.")
energy <- rename(energy, "Solar" = "Solar..terawatt.hours.")
energy <- rename(energy, "Other renewables" = "Other.renewables..modern.biofuels..geothermal..wave...tidal...terawatt.hours.")
energy <- energy[ ,-2]

worldenergy <- energy %>%
  filter(Country == "World")

worldenergy$TotalenergyUse<-rowSums(worldenergy[, c("Hydro", "Wind", "Solar", "Other renewables")], na.rm=T)

worldenergy <- worldenergy[ ,-3:-6]

ggplot(worldenergy, aes(x = Year, y = TotalenergyUse)) +
  geom_line()+
  ggtitle("World energy use")

africaenergy <- energy %>%
  filter(Country == "Africa")

africaenergy$TotalenergyUse<-rowSums(africaenergy[, c("Hydro", "Wind", "Solar", "Other renewables")], na.rm=T)

africaenergy <- africaenergy[ ,-3:-6]

ggplot(africaenergy, aes(x = Year, y = TotalenergyUse))+
  geom_line()+
  ggtitle("Africa energy use")

europeEnergy <- energy %>%
  filter(Country == "European Union")

europeEnergy$TotalenergyUse<-rowSums(europeEnergy[, c("Hydro", "Wind", "Solar", "Other renewables")], na.rm=T)

europeEnergy <- europeEnergy[ ,-3:-6]

ggplot(europeEnergy, aes(x = Year, y = TotalenergyUse))+
  geom_line()+
  ggtitle("European Union energy use")

asiaenergy <- energy %>%
  filter(Country == "Asia Pacific")

asiaenergy$TotalenergyUse<-rowSums(asiaenergy[, c("Hydro", "Wind", "Solar", "Other renewables")], na.rm=T)

asiaenergy <- asiaenergy[ ,-3:-6]

ggplot(asiaenergy, aes(x = Year, y = TotalenergyUse))+
  geom_line()+
  ggtitle("Asia energy use")

americaenergy <- energy %>%
  filter(Country == "North America")

americaenergy$TotalenergyUse<-rowSums(americaenergy[, c("Hydro", "Wind", "Solar", "Other renewables")], na.rm=T)

americaenergy <- americaenergy[ ,-3:-6]

ggplot(americaenergy, aes(x = Year, y = TotalenergyUse))+
  geom_line()+
  ggtitle("North America Energy use")


```

```{r}
#Laster opp gdp percap filen og rydder den

GdpPercap <- read.csv("real-gdp-per-capita-PWT.csv")

GdpPercap <- rename(GdpPercap, "Country" = "Entity", "Year" = "Year", "GdpPercap" = "GDP.per.capita..2011.international....PPP.adjusted.US...")

GdpPercap <- GdpPercap[ , -2]

GdpUS <- GdpPercap %>%
  filter(Country == "United States")

ggplot(GdpUS, aes(x = Year, y = GdpPercap)) +
  geom_line()

#Tester å sette gdppercap med totalenergy use for USA
ggplot() +
  geom_line(data = GdpUS, aes(y = GdpUS$GdpPercap, x = Year)) +
  geom_line(data = americaenergy, aes(y = americaenergy$TotalenergyUse, x = Year))


```

```{r}
# ANIMERT GRAF AV GDP-PER-CAPITA 

gifski_renderer(file = tempfile(fileext = ".gif"), loop = TRUE,
  width = NULL, height = NULL)

file_renderer(dir = ".", prefix = "gganim_plot", overwrite = FALSE)

animplot <- ggplot(GdpPercap, aes(x=Year , y=GdpPercap, color=Country)) + 
  geom_line() + 
  geom_point() + 
  ggtitle("Gdp per capita by country from 1950 to 2018") + 
  ylab("Gdp per capita") +
  transition_reveal(Year)+
  theme_ft_rc()



```


```{r}
# Merger datasettene til et stort et. Kan være lurt å dele det inn i mindre kolonner og må få fikset dato.

totaldata <- merge(energy, hdi, by = "Country")

totalPlot <- ggplot(totaldata, aes(x=Year.y, y=Value, color = Country))+
  geom_point()+
  geom_line()
  

```

```{r}
#Lager et datasett med landene vi skal ha med Norge, tyskland, argentina, india


```


```{r}
#JOBB 1: fikse på kolonnene i totaldata og få sortert det.


```

```{r}
#Jobb 2: finne korrelasjoner i ulike land / alle land mellom HDI og alt. energi.

```

```{r}
#Jobb 3: Om vi finner noe interessant: Poengter det med grafer. F.eks: Hvis Norge har høy korrelasjon, hvis det med en graf. Forklar!


```

